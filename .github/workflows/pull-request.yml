name: Build Pull Request
on:
  pull_request:
    paths-ignore:
      # omit tests from triggering CI except when CI tests are changed
      - 'tests/v2/validation/**'
      - 'tests/v2/codecoverage/**'
      - 'tests/validation/**'

env:
  ARCH: amd64
  TAG: v2.9-${{ github.sha }}
  GIT_TAG: v2.9-${{ github.sha }}
  HEAD_TAG: v2.9-${{ github.sha }}
  COMMIT: ${{ github.sha }}
  REPOSITORY_OWNER: ${{ github.repository_owner }}
  IMAGE: ${{ github.repository_owner }}/rancher
  IMAGE_AGENT: ${{ github.repository_owner }}/rancher-agent
  IMAGE_INSTALLER: ${{ github.repository_owner }}/system-agent-installer-rancher
jobs:
  test-win-2019:
    runs-on: windows-2019
    steps:
    - name: test-win-2019
      run: powershell.exe Write-Output foo
  build-agent-windows:
    strategy:
      matrix:
        os: [windows]
        version: [2019]
    runs-on: ${{ matrix.os }}-${{ matrix.version }}
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
    - name: Build Windows Agent Image
<<<<<<< HEAD
      run: docker build -t ${{ env.IMAGE_AGENT }}:${{ env.TAG }} --build-arg VERSION=${{ env.COMMIT }} --build-arg SERVERCORE_VERSION=ltsc${{ matrix.version.version }} --build-arg GO_TAG=${{ matrix.version.go_tag }} -f package/windows/Dockerfile.agent .
=======
      run: docker build -D -t ${{ env.IMAGE_AGENT }}:${{ env.TAG }} --build-arg VERSION=${{ env.COMMIT }} --build-arg SERVERCORE_VERSION=ltsc${{ matrix.version }} -f package/windows/Dockerfile.agent .
>>>>>>> c0bd81949 (action)
