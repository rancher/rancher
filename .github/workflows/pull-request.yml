name: Build Pull Request
on:
  pull_request:
    paths-ignore:
      # omit tests from triggering CI except when CI tests are changed
      - 'tests/v2/validation/**'
      - 'tests/v2/codecoverage/**'
      - 'tests/validation/**'

env:
  ARCH: amd64
  TAG: v2.9-${{ github.sha }}
  GIT_TAG: v2.9-${{ github.sha }}
  HEAD_TAG: v2.9-${{ github.sha }}
  COMMIT: ${{ github.sha }}
  REPOSITORY_OWNER: ${{ github.repository_owner }}
  IMAGE: ${{ github.repository_owner }}/rancher
  IMAGE_AGENT: ${{ github.repository_owner }}/rancher-agent
  IMAGE_INSTALLER: ${{ github.repository_owner }}/system-agent-installer-rancher
jobs:
  build-agent-windows:
    strategy:
      matrix:
        os: [windows]
        version: [2019]
    runs-on: ${{ matrix.os }}-2025
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
    - name: Build Windows Agent Image
      run: docker run --isolation=hyperv mcr.microsoft.com/windows/servercore:ltsc${{ matrix.version }} powershell.exe echo foo
